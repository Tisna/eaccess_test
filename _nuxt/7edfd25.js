(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{471:function(t,e,o){"use strict";o(193);var r=o(194);e.a=Object(r.a)("layout")},476:function(t,e,o){"use strict";o(193);var r=o(194);e.a=Object(r.a)("flex")},712:function(t,e,o){"use strict";o.r(e);o(31),o(192),o(7),o(55);var r={name:"MasterUser",data:function(){return{totalData:0,editedIndex:-1,submitLoad:!1,dialogFilter:!1,statusProcessing:"insert",show:!1,dialog:!1,message:!1,loading:!0,searchItem:"",search:"",allData:[],itemSearch:[],searchStatus:"Pending",documentStatus:[],options:{},form:{U_DocEntry:null,U_UserID:null,U_Supporting:null,U_Remarks:null,U_UoM:null,U_Description:null,U_CreatedBy:null,U_ItemType:null},defaultItem:{U_DocEntry:null,U_UserID:null,U_Supporting:null,U_Remarks:null,U_UoM:null,U_Description:null,U_CreatedBy:null,U_ItemType:null},ItemType:["Inventory","Asset","Service"],headers:[{text:"Request No",value:"U_DocEntry"},{text:"Item Code",value:"ItemCode"},{text:"Item Name",value:"ItemName"},{text:"Item Type",value:"U_ItemType"},{text:"Specification",value:"U_Description"},{text:"UoM",value:"U_UoM"},{text:"Status",value:"U_DocStatus"},{text:"Descriptions",value:"U_Remarks"},{text:"Supporting Data",value:"U_Supporting"},{text:"Created By",value:"U_CreatedBy"},{text:"Created At",value:"U_CreatedAt"},{text:"Action",value:"ACTION",align:"left"}]}},head:function(){return{title:"Item Request"}},computed:{formTitle:function(){return-1===this.editedIndex?"New Data":"Edit Data"}},watch:{options:{handler:function(){this.getDataFromApi()},deep:!0}},methods:{emitData:function(data){this.documentStatus=data.documentStatus,this.itemSearch=data.itemSearch,this.searchStatus=data.searchStatus,this.searchItem=data.searchItem,this.search=data.search,this.getDataFromApi()},getDataFromApi:function(){var t=this;this.loading=!0;var e=this;this.$axios.get("/api/reservation/req-item",{params:{options:e.options,searchItem:e.searchItem,search:e.search,searchStatus:e.searchStatus}}).then((function(e){t.loading=!1,t.allData=e.data.rows,t.totalData=e.data.total,t.itemSearch=e.data.filter,t.documentStatus=e.data.documentStatus})).catch((function(e){t.loading=!1,t.$swal({type:"error",title:"Error",text:e.response.data.message})}))},newData:function(){var t=this;this.dialog=!0,setTimeout((function(){t.form=Object.assign({},t.defaultItem),t.editedIndex=-1}),300),this.statusProcessing="insert"},editItem:function(t){this.statusProcessing="update",this.editedIndex=this.allData.indexOf(t),this.form=Object.assign({},t),this.dialog=!0,this.insert=!1},close:function(){var t=this;this.statusProcessing="insert",this.dialog=!1,setTimeout((function(){t.form=Object.assign({},t.defaultItem),t.editedIndex=-1}),300)},save:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",e=this,form=this.form,o=this.statusProcessing,data={form:form,status:o};"insert"===o?(this.store("post","/api/reservation/req-item",data,"insert",t),e.submitLoad=!1):"update"===o&&(this.store("put","/api/reservation/req-item/"+this.form.U_UserID,data,"update",t),e.submitLoad=!1)},store:function(t,e,data,o){var r=this,n=this;n.submitLoad=!0,this.$axios({method:t,url:e,data:data}).then((function(t){r.dialog=!1,r.message=t.data.message,setTimeout((function(){return r.message=!1}),8e3),r.getDataFromApi()})).catch((function(t){r.$swal({type:"error",title:"Error",text:t.response.data.message}),n.submitLoad=!1}))}}},n=o(52),l=o(70),c=o.n(l),d=o(728),m=o(199),v=o(430),h=o(415),f=o(697),_=o(457),x=o(403),U=o(476),D=o(462),S=o(177),I=o(471),y=o(472),k=o(413),C=o(474),T=o(44),w=o(116),F=o(473),component=Object(n.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-layout",[o("v-flex",{attrs:{sm12:""}},[o("v-toolbar",{attrs:{flat:"",color:"white",dense:""}},[o("v-toolbar-title",[t._v("Request Item")]),t._v(" "),o("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),t._v(" "),o("v-spacer"),t._v(" "),o("v-dialog",{attrs:{persistent:"","max-width":"400px"},model:{value:t.dialogFilter,callback:function(e){t.dialogFilter=e},expression:"dialogFilter"}},[o("v-card",[o("v-card-title",[t._v("Filter Form")]),t._v(" "),o("v-card-text",[o("LazyTableFilter",{staticClass:"hidden-sm-and-up",attrs:{"document-status":t.documentStatus,"search-status":t.searchStatus,"item-search":t.itemSearch,"search-item":t.searchItem,search:t.search},on:{getDataFromApi:t.emitData}})],1),t._v(" "),o("v-card-actions",[o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"red darken-1",text:"",small:""},on:{click:function(e){t.dialogFilter=!1}}},[t._v("\n              Close\n            ")])],1)],1)],1),t._v(" "),o("LazyTableFilter",{staticClass:"hidden-sm-and-down",attrs:{"document-status":t.documentStatus,"search-status":t.searchStatus,"item-search":t.itemSearch,"search-item":t.searchItem,search:t.search},on:{getDataFromApi:t.emitData}}),t._v(" "),o("v-btn",{staticClass:"d-md-none d-lg-none d-sm-flex d-xs-flex",attrs:{icon:"",color:"green",dark:""},on:{click:function(e){t.dialogFilter=!0}}},[o("v-icon",[t._v("mdi-filter-variant")])],1),t._v(" "),o("v-btn",{attrs:{icon:"",color:"green",dark:""},on:{click:t.newData}},[o("v-icon",[t._v("mdi-plus-circle")])],1),t._v(" "),o("v-btn",{attrs:{loading:t.loading,icon:""},on:{click:t.getDataFromApi}},[o("v-icon",[t._v("mdi-refresh")])],1)],1),t._v(" "),o("div",{staticClass:"mt-2"},[o("v-data-table",{staticClass:"elevation-1",attrs:{"mobile-breakpoint":0,headers:t.headers,items:t.allData,"items-per-page":20,options:t.options,"server-items-length":t.totalData,loading:t.loading,"footer-props":{"items-per-page-options":[20,50,100,-1]}},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"item.ACTION",fn:function(e){var r=e.item;return[o("v-tooltip",{staticStyle:{"margin-top":"4px"},attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,l=e.attrs;return[o("v-badge",{attrs:{content:r.count_attachment,color:"green",value:r.count_attachment}},[o("v-btn",t._g(t._b({attrs:{icon:"",color:"orange"},on:{click:function(e){return t.$refs.attachment.openAttachment(r.U_DocEntry,"item")}}},"v-btn",l,!1),n),[o("v-icon",{attrs:{small:""}},[t._v("mdi-attachment\n                  ")])],1)],1)]}}],null,!0)},[t._v(" "),o("span",[t._v("Upload Attachment")])]),t._v(" "),r.U_CreatedBy===t.$auth.user.name?o("v-tooltip",{staticStyle:{"margin-top":"4px"},attrs:{top:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,l=e.attrs;return[o("v-btn",t._g(t._b({staticClass:"ml-2",attrs:{icon:"",color:"orange"},on:{click:function(e){return t.editItem(r)}}},"v-btn",l,!1),n),[o("v-icon",{attrs:{small:""}},[t._v("mdi-pencil-circle")])],1)]}}],null,!0)},[t._v(" "),o("span",[t._v("Edit Item")])]):t._e()]}}],null,!0)})],1)],1),t._v(" "),o("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[o("v-card",[o("v-card-title",[o("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),t._v(" "),o("v-card-text",[o("v-form",[o("v-layout",{attrs:{wrap:""}},[t.message?o("v-flex",{attrs:{xs12:""}},[o("div",{staticClass:"red darken-2 text-xs-center"},[o("span",{staticClass:"white--text"},[t._v(t._s(t.message))])])]):t._e(),t._v(" "),o("v-flex",{staticClass:"d-flex",attrs:{md12:""}},[o("v-layout",{attrs:{wrap:""}},[o("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[o("v-select",{attrs:{items:t.ItemType,placeholder:"Item Type",outlined:"",dense:"",clearable:"","hide-details":"auto"},model:{value:t.form.U_ItemType,callback:function(e){t.$set(t.form,"U_ItemType",e)},expression:"form.U_ItemType"}})],1),t._v(" "),o("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[o("v-text-field",{attrs:{label:"Specification",height:"25",placeholder:"Specification",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.U_Description,callback:function(e){t.$set(t.form,"U_Description",e)},expression:"form.U_Description"}})],1),t._v(" "),o("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[o("v-text-field",{attrs:{label:"UoM",height:"25",placeholder:"User Name",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.U_UoM,callback:function(e){t.$set(t.form,"U_UoM",e)},expression:"form.U_UoM"}})],1),t._v(" "),o("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[o("v-text-field",{attrs:{label:"Descriptions",height:"25",placeholder:"Descriptions",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.U_Remarks,callback:function(e){t.$set(t.form,"U_Remarks",e)},expression:"form.U_Remarks"}})],1),t._v(" "),o("v-flex",{staticClass:"pa-2",attrs:{xs12:""}},[o("v-text-field",{attrs:{label:"Supporting data",height:"25",placeholder:"Supporting Data",outlined:"",dense:"","hide-details":"auto"},model:{value:t.form.U_Supporting,callback:function(e){t.$set(t.form,"U_Supporting",e)},expression:"form.U_Supporting"}})],1)],1)],1)],1)],1)],1),t._v(" "),o("v-card-actions",[o("v-spacer"),t._v(" "),o("v-btn",{attrs:{color:"red darken-1",text:"",small:""},on:{click:function(e){return t.close()}}},[t._v("\n          Close\n        ")]),t._v(" "),o("v-btn",{attrs:{color:"green darken-1",small:"",dark:"",loading:t.submitLoad},on:{click:function(e){return t.save()}}},[t._v("\n          Save\n        ")])],1)],1)],1),t._v(" "),o("LazyAttachment",{ref:"attachment"})],1)}),[],!1,null,null,null);e.default=component.exports;c()(component,{VBadge:d.a,VBtn:m.a,VCard:v.a,VCardActions:h.a,VCardText:h.b,VCardTitle:h.c,VDataTable:f.a,VDialog:_.a,VDivider:x.a,VFlex:U.a,VForm:D.a,VIcon:S.a,VLayout:I.a,VSelect:y.a,VSpacer:k.a,VTextField:C.a,VToolbar:T.a,VToolbarTitle:w.a,VTooltip:F.a})}}]);